# Template file for 'rnote'
pkgname=rnote
version=0.13.1
revision=1
build_style=meson
hostmakedepends=(
    "cargo"
    "meson"
    "pkg-config")
    
makedepends=(
				"gtk4-devel"
    "libadwaita-devel"
    "poppler-glib-devel"
    "appstream-glib-devel"
    "desktop-file-utils"
)
depends=(
    "gtk4"
    "libadwaita"
    "poppler-glib"
    "gst-plugins-base1"
)
short_desc="Simple drawing application to create handwritten notes"
homepage="https://github.com/flxzt/rnote"
license="GPL-3.0-or-later"
maintainer="ymp <tmp@tmp>"
distfiles="${homepage}/releases/download/v${version}/${pkgname}-${version}.tar.xz"
checksum="843eae70ebdbbb4f417225771ce1086752fcb29ccf8bbb77296abae042d24759"

# Disable Link-Time Optimization, as it can be problematic with Rust.
meson_args="-Db_lto=disabled"

pre_build() {
    # Fetch all Rust dependencies (crates) before starting the build.
    cargo fetch --locked --target=${XBPS_TARGET_MACHINE}
}
